---
phase: 03-application-shell
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/app/layout.tsx
  - src/app/globals.css
  - src/components/ui/sidebar.tsx
  - src/components/ui/dialog.tsx
  - src/components/ui/resizable.tsx
  - src/components/ui/sheet.tsx
  - src/components/ui/button.tsx
  - src/components/ui/tooltip.tsx
  - src/components/ui/input.tsx
  - src/components/ui/separator.tsx
  - src/components/ui/skeleton.tsx
autonomous: true

must_haves:
  truths:
    - "App renders in both light and dark mode with system preference detection"
    - "shadcn/ui components are installed and importable"
    - "Root layout wraps app with ThemeProvider and ClerkProvider"
  artifacts:
    - path: "src/components/ui/sidebar.tsx"
      provides: "shadcn Sidebar component with built-in collapse state"
    - path: "src/components/ui/dialog.tsx"
      provides: "shadcn Dialog component for modals"
    - path: "src/components/ui/button.tsx"
      provides: "shadcn Button component"
    - path: "src/app/layout.tsx"
      provides: "Root layout with ThemeProvider wrapping"
      contains: "ThemeProvider"
  key_links:
    - from: "src/app/layout.tsx"
      to: "next-themes"
      via: "ThemeProvider wrapping html/body"
      pattern: "ThemeProvider.*attribute.*class"
---

<objective>
Install all Phase 3 dependencies, add shadcn/ui components, and configure the root layout with dark mode support via next-themes.

Purpose: Every subsequent plan depends on these libraries and components being available. This is the foundation layer that unblocks all other work.
Output: Updated package.json with new deps, shadcn/ui components in src/components/ui/, updated root layout with ThemeProvider.
</objective>

<execution_context>
@/Users/michaelchristie/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelchristie/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-application-shell/03-RESEARCH.md
@src/app/layout.tsx
@src/app/globals.css
@package.json
@components.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and shadcn/ui components</name>
  <files>package.json, src/components/ui/*.tsx</files>
  <action>
Install the Phase 3 libraries:

```bash
npm install react-resizable-panels framer-motion react-hotkeys-hook react-textarea-autosize next-themes
```

Then install shadcn/ui components needed for the application shell:

```bash
npx shadcn@latest add sidebar dialog sheet button tooltip input separator skeleton
```

The `sidebar` component from shadcn also pulls in its own dependencies. The `resizable` component is NOT needed from shadcn because we're using `react-resizable-panels` directly (per research recommendation -- shadcn's resizable is a thin wrapper around the same library, but using it directly gives more control).

Verify all components are created in `src/components/ui/`.
  </action>
  <verify>
Run `npm run build` to confirm no dependency resolution errors. Verify files exist:
- `src/components/ui/sidebar.tsx`
- `src/components/ui/dialog.tsx`
- `src/components/ui/button.tsx`
- `src/components/ui/sheet.tsx`
- `src/components/ui/tooltip.tsx`
- `src/components/ui/input.tsx`
- `src/components/ui/separator.tsx`
- `src/components/ui/skeleton.tsx`
  </verify>
  <done>All libraries installed in package.json. All shadcn/ui components exist in src/components/ui/ and are importable.</done>
</task>

<task type="auto">
  <name>Task 2: Configure root layout with ThemeProvider and restructure for workshop routes</name>
  <files>src/app/layout.tsx, src/app/globals.css</files>
  <action>
Update `src/app/layout.tsx`:

1. Add `next-themes` ThemeProvider wrapping the entire app. Use `attribute="class"`, `defaultTheme="system"`, `enableSystem={true}`.
2. Add `suppressHydrationWarning` to the `<html>` element (required by next-themes to avoid hydration mismatch).
3. REMOVE the Header component from the root layout entirely. The Header should NOT be in root layout because:
   - Landing page gets its own landing-header (Plan 03)
   - Workshop pages get their own workshop-header (Plan 04)
   - Dashboard gets a simple header variant
   - Per user decision: "Separate header components for landing page vs workshop"
4. REMOVE the `pt-16` padding from `<main>` since Header is no longer here.
5. Keep the ClerkProvider conditional wrapping logic (it works well).
6. Keep the font configuration as-is.

Update `src/app/globals.css`:
1. Ensure CSS variables support both light and dark themes. Tailwind 4 with `darkMode: 'class'` should work with the `dark:` variant.
2. Add CSS custom properties for the Linear-like design system:
   - Muted, subtle borders (e.g., `--border: 220 13% 91%` for light, darker for dark)
   - Ensure existing color tokens work in both modes
   - Do NOT remove any existing Tailwind/shadcn variable definitions -- extend them

The root layout should be clean: html > body > ClerkProvider > ThemeProvider > {children}. No Header, no navigation -- those belong in route-specific layouts.
  </action>
  <verify>
Run `npm run dev` and confirm:
1. App loads without hydration errors
2. No Header appears on the landing page (we removed it from root layout)
3. Theme switching works (can test by adding `dark` class to html element in dev tools)
Run `npm run build` to confirm no TypeScript errors.
  </verify>
  <done>Root layout wraps app with ThemeProvider (attribute="class", defaultTheme="system"). Header removed from root layout. CSS variables support light and dark mode. No hydration errors.</done>
</task>

</tasks>

<verification>
- `npm run build` passes with zero errors
- All shadcn/ui components exist in `src/components/ui/`
- `next-themes`, `framer-motion`, `react-resizable-panels`, `react-hotkeys-hook`, `react-textarea-autosize` in package.json dependencies
- Root layout has ThemeProvider with `attribute="class"` and `defaultTheme="system"`
- No Header component in root layout
- Dark mode CSS variables defined in globals.css
</verification>

<success_criteria>
All Phase 3 dependencies installed and configured. Root layout restructured to support route-specific headers. Dark mode theming works via CSS class toggling. Zero build errors.
</success_criteria>

<output>
After completion, create `.planning/phases/03-application-shell/03-01-SUMMARY.md`
</output>
