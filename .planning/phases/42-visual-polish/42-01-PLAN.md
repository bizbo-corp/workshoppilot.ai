---
phase: 42-visual-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/workshop/chat-panel.tsx
  - src/components/workshop/step-container.tsx
  - src/components/canvas/guide-node.tsx
  - src/components/canvas/canvas-guide.tsx
  - src/components/workshop/synthesis-summary-view.tsx
  - src/components/dashboard/completed-workshop-card.tsx
autonomous: true
requirements:
  - VISL-01

must_haves:
  truths:
    - "No component uses hardcoded bg-white, bg-blue, or text-blue classes outside of intentional post-it/swatch colors"
    - "Semantic score colors (green/amber/red) in synthesis-summary-view and completed-workshop-card use olive-tinted equivalents"
    - "Guide nodes and canvas guides use olive-tinted accent colors instead of raw blue"
    - "Chat action buttons use bg-card instead of bg-white for proper dark mode behavior"
  artifacts:
    - path: "src/components/workshop/chat-panel.tsx"
      provides: "Olive-themed chat action buttons"
      contains: "bg-card"
    - path: "src/components/canvas/guide-node.tsx"
      provides: "Olive-themed guide node header and handles"
      contains: "olive"
    - path: "src/components/canvas/canvas-guide.tsx"
      provides: "Olive-themed canvas guide CTA button"
      contains: "olive"
    - path: "src/components/workshop/synthesis-summary-view.tsx"
      provides: "Olive-tinted semantic score colors"
      contains: "olive"
    - path: "src/components/dashboard/completed-workshop-card.tsx"
      provides: "Olive-tinted semantic score colors"
      contains: "olive"
  key_links:
    - from: "src/components/workshop/chat-panel.tsx"
      to: "olive token system"
      via: "bg-card replaces bg-white on action buttons"
      pattern: "bg-card"
    - from: "src/components/canvas/guide-node.tsx"
      to: "olive token system"
      via: "olive-600 replaces blue-500 on guide headers/handles"
      pattern: "olive-600"
---

<objective>
Audit and fix remaining olive theme gaps across all components

Purpose: Close the gap between the olive theme rollout (Phase 36) and the current codebase. Several components still use hardcoded gray/blue/white classes that break visual consistency, especially in dark mode. The known tech debt item — semantic status colors in synthesis-summary-view — is addressed here.

Output: All visible surfaces use olive token system. Zero hardcoded bg-white/bg-blue/text-blue classes remain outside of intentional post-it note color palettes and color picker swatches.
</objective>

<execution_context>
@/Users/michaelchristie/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelchristie/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix olive theme gaps in chat panel and step container</name>
  <files>
    src/components/workshop/chat-panel.tsx
    src/components/workshop/step-container.tsx
  </files>
  <action>
In `chat-panel.tsx`, replace all `bg-white` on the action buttons (approximately lines 2543, 2570, 2588, 2620) with `bg-card`. These are the inline action buttons (sticky note, extract, navigate, etc.) that currently render with a white background that breaks dark mode. The dark mode variant (`dark:bg-neutral-olive-800`) is already correct — only the light mode `bg-white` needs to become `bg-card`.

In `step-container.tsx`, find the fullscreen close button (approximately line 595) with `bg-white/10 ... hover:bg-white/20` — replace with `bg-background/10 ... hover:bg-background/20` so it uses token-aware references.

Do NOT touch:
- Post-it note color classes (yellow, red, blue, green, pink, orange) — these are intentional
- `text-white` on gradient headers (persona-template-node, concept-card-node) — these are over dark backgrounds
- Color picker swatches — these are literal color samples
  </action>
  <verify>
Run: `grep -n 'bg-white' src/components/workshop/chat-panel.tsx` — should return 0 matches.
Run: `grep -n 'bg-white' src/components/workshop/step-container.tsx` — should return 0 matches.
Run: `npm run build` — should complete without type errors.
  </verify>
  <done>Chat action buttons use bg-card in light mode. Step container fullscreen close button uses token-aware background. No bg-white classes remain in either file.</done>
</task>

<task type="auto">
  <name>Task 2: Convert guide nodes and canvas guides from blue to olive</name>
  <files>
    src/components/canvas/guide-node.tsx
    src/components/canvas/canvas-guide.tsx
  </files>
  <action>
In `guide-node.tsx`:
- Replace the guide drag handle header background `bg-blue-500/90` (line ~77) with `bg-olive-600/90`. Keep `text-white` since it's over a dark olive background.
- Replace `hover:bg-white/20` (line ~88) with `hover:bg-background/20`
- Replace `handleClassName="!bg-blue-500"` (lines ~246, ~304) with `handleClassName="!bg-olive-600"`
- Replace `dark:bg-white/20 dark:hover:bg-white/40` (line ~321) dismiss button with `dark:bg-background/20 dark:hover:bg-background/40`

In `canvas-guide.tsx`:
- Replace the CTA button `bg-blue-500 text-white hover:bg-blue-600` (line ~106) with `bg-olive-600 text-white hover:bg-olive-700`
- Replace `dark:bg-white/20 dark:hover:bg-white/40` (line ~123) dismiss button with `dark:bg-background/20 dark:hover:bg-background/40`

These components are the interactive guide overlays on the canvas. Switching from blue to olive makes them visually consistent with the rest of the design system.
  </action>
  <verify>
Run: `grep -n 'bg-blue\|text-blue' src/components/canvas/guide-node.tsx src/components/canvas/canvas-guide.tsx` — should return 0 matches.
Run: `npm run build` — should complete without type errors.
  </verify>
  <done>Guide nodes use olive-600 for headers and handles. Canvas guide CTAs use olive-600. No blue classes remain in guide components.</done>
</task>

<task type="auto">
  <name>Task 3: Convert semantic score colors to olive-tinted equivalents</name>
  <files>
    src/components/workshop/synthesis-summary-view.tsx
    src/components/dashboard/completed-workshop-card.tsx
  </files>
  <action>
The semantic green/amber/red score colors in these components are known tech debt from the olive rollout. Convert them to olive-tinted equivalents that still communicate score quality while staying within the design language.

**Score color mapping (apply to both files):**

High scores (>=7): Replace `text-green-700 dark:text-green-400` with `text-olive-700 dark:text-olive-400`. Replace `bg-green-500` progress bars with `bg-olive-600`. Replace `bg-green-500/20 text-green-700 border-green-500/30` badges with `bg-olive-500/20 text-olive-700 dark:text-olive-400 border-olive-500/30`.

Medium scores (>=4): Keep `text-amber-700 dark:text-amber-400` and `bg-amber-500` — amber is close enough to olive warm tones and serves as a meaningful middle-ground. Update the badge to `bg-amber-500/20 text-amber-700 dark:text-amber-400 border-amber-500/30` (this is already correct).

Low scores (<4): Replace `text-red-700 dark:text-red-400` with `text-destructive dark:text-destructive` (using the destructive token). Replace `bg-red-500` with `bg-destructive`. Replace badge classes with `bg-destructive/20 text-destructive border-destructive/30`.

In `completed-workshop-card.tsx`:
- Update `getScoreColor()` function with the new mapping
- Update `getStatusBadgeClasses()` with the new mapping
- Replace the "Completed" status indicator `text-green-600/400` with `text-olive-600 dark:text-olive-400` and `CheckCircle2` icon color

In `synthesis-summary-view.tsx`:
- Update `getScoreColor()` function
- Update `getScoreBarColor()` function
- Update `getStatusBadgeClasses()` function

Keep the amber middle tier as-is since it serves as a warm-neutral that works within the olive family.
  </action>
  <verify>
Run: `grep -n 'text-green-\|bg-green-' src/components/workshop/synthesis-summary-view.tsx src/components/dashboard/completed-workshop-card.tsx` — should return 0 matches.
Run: `grep -n 'text-red-\|bg-red-' src/components/workshop/synthesis-summary-view.tsx src/components/dashboard/completed-workshop-card.tsx` — should return 0 matches (destructive token used instead).
Run: `npm run build` — should complete without type errors.
  </verify>
  <done>Semantic score colors use olive-tinted equivalents. High scores use olive-600/700. Low scores use destructive token. Amber middle tier retained. Both files consistent.</done>
</task>

</tasks>

<verification>
1. `grep -rn 'bg-white' src/components/workshop/chat-panel.tsx src/components/workshop/step-container.tsx` — 0 matches
2. `grep -rn 'bg-blue\|text-blue' src/components/canvas/guide-node.tsx src/components/canvas/canvas-guide.tsx` — 0 matches
3. `grep -rn 'text-green-\|bg-green-' src/components/workshop/synthesis-summary-view.tsx src/components/dashboard/completed-workshop-card.tsx` — 0 matches
4. `npm run build` — completes successfully
5. Visual check: guide nodes show olive header, score badges show olive/amber/destructive
</verification>

<success_criteria>
- Zero hardcoded bg-white classes in chat-panel.tsx and step-container.tsx
- Zero blue classes in guide-node.tsx and canvas-guide.tsx
- Semantic scores use olive (high), amber (medium), destructive (low)
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/42-visual-polish/42-01-SUMMARY.md`
</output>
