---
phase: 13-ideation-validation-steps-8-10
plan: 03
type: execute
wave: 3
depends_on: ["13-01", "13-02"]
files_modified:
  - src/lib/ai/prompts/step-prompts.ts
autonomous: false

must_haves:
  truths:
    - "Schema-prompt alignment verified: all Step 8 ideationArtifactSchema fields mentioned in Step 8 prompt GATHERING REQUIREMENTS"
    - "Schema-prompt alignment verified: all Step 9 conceptArtifactSchema fields mentioned in Step 9 prompt GATHERING REQUIREMENTS"
    - "Schema-prompt alignment verified: all Step 10 validateArtifactSchema fields mentioned in Step 10 prompt GATHERING REQUIREMENTS"
    - "TypeScript compilation and production build succeed"
    - "Human verified end-to-end flow for Steps 8-10 with AI facilitation and UI rendering"
  artifacts:
    - path: "src/lib/ai/prompts/step-prompts.ts"
      provides: "Alignment-verified prompts for Steps 8-10"
  key_links:
    - from: "src/lib/schemas/step-schemas.ts"
      to: "src/lib/ai/prompts/step-prompts.ts"
      via: "Every schema field must be mentioned in the corresponding prompt GATHERING REQUIREMENTS section"
      pattern: "GATHERING REQUIREMENTS"
---

<objective>
Verify schema-prompt alignment for Steps 8-10 and run human verification of the complete Ideation/Validation flow.

Purpose: Schema-prompt alignment is a quality gate established in Phases 11-12. If a schema field is not mentioned in the prompt's GATHERING REQUIREMENTS section, the AI will not gather that data during conversation, resulting in incomplete extraction. Human verification confirms the end-to-end experience works as intended.

Output: Verified alignment (with any fixes applied) + human-approved Steps 8-10 flow.
</objective>

<execution_context>
@/Users/michaelchristie/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelchristie/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/13-ideation-validation-steps-8-10/13-CONTEXT.md
@.planning/phases/13-ideation-validation-steps-8-10/13-01-SUMMARY.md
@.planning/phases/13-ideation-validation-steps-8-10/13-02-SUMMARY.md
@src/lib/schemas/step-schemas.ts
@src/lib/ai/prompts/step-prompts.ts
@src/lib/ai/prompts/validation-criteria.ts
@src/components/workshop/output-panel.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build verification and schema-prompt alignment check</name>
  <files>src/lib/ai/prompts/step-prompts.ts</files>
  <action>
Run automated verification checks following the pattern from 12-03-PLAN.md:

**1. TypeScript compilation:**
```bash
npx tsc --noEmit
```
Must pass with zero errors.

**2. Production build:**
```bash
npm run build
```
Must succeed.

**3. Schema-prompt alignment verification for Step 8 (ideation):**
Read ideationArtifactSchema from step-schemas.ts and extract ALL field names (including nested):
- Top-level: hmwPrompt, clusters, userIdeas, brainWrittenIdeas, crazyEightsIdeas, selectedIdeas
- Nested in clusters: theme, ideas (title, description, isWildCard)
- Nested in userIdeas: title, description
- Nested in brainWrittenIdeas: originalTitle, evolution, finalVersion
- Nested in crazyEightsIdeas: title, description

Read Step 8 prompt ('ideation') from step-prompts.ts. Check that GATHERING REQUIREMENTS section or surrounding prompt text mentions each field concept (doesn't need exact field name, but must mention the concept):
- hmwPrompt: Must mention HMW prompt from Step 7
- clusters: Must mention themed clusters
- clusters.theme: Must mention themes
- clusters.ideas: Must mention ideas within clusters
- clusters.ideas.isWildCard: Must mention wild card marking
- userIdeas: Must mention user-contributed ideas
- brainWrittenIdeas: Must mention brain writing evolved ideas
- crazyEightsIdeas: Must mention Crazy 8s ideas
- selectedIdeas: Must mention selection of ideas for concept development

If any field concept is NOT mentioned, add it to the GATHERING REQUIREMENTS section.

**4. Schema-prompt alignment verification for Step 9 (concept):**
Read conceptArtifactSchema and extract ALL fields:
- Top-level: concepts (array)
- Nested in concepts: ideaSource, name, elevatorPitch, usp, swot, feasibility, billboardHero
- Nested in swot: strengths, weaknesses, opportunities, threats
- Nested in feasibility: technical, technicalRationale, business, businessRationale, userDesirability, userDesirabilityRationale
- Nested in billboardHero: headline, subheadline, cta

Check Step 9 prompt mentions each field concept. If any missing, fix.

**5. Schema-prompt alignment verification for Step 10 (validate):**
Read validateArtifactSchema and extract ALL fields:
- Top-level: narrativeIntro, stepSummaries, confidenceAssessment, recommendedNextSteps
- Nested in stepSummaries: stepNumber, stepName, keyOutputs
- Nested in confidenceAssessment: score, rationale, researchQuality

Check Step 10 prompt mentions each field concept. If any missing, fix.

**6. Cross-check validation criteria:**
Verify each Step 8-10 validation criterion in validation-criteria.ts references concepts that exist in the corresponding schema (no criteria checking for fields that don't exist).

Report results for each step: ALIGNED or FIXED (with description of what was added).
  </action>
  <verify>
- `npx tsc --noEmit` passes
- `npm run build` succeeds
- Step 8 alignment: ALIGNED or FIXED (all schema fields covered in prompt)
- Step 9 alignment: ALIGNED or FIXED (all schema fields covered in prompt)
- Step 10 alignment: ALIGNED or FIXED (all schema fields covered in prompt)
- No changes to Steps 1-7 prompts
  </verify>
  <done>
TypeScript compilation and build pass. Schema-prompt alignment verified for all 3 Ideation/Validation steps. Any mismatches fixed by expanding GATHERING REQUIREMENTS sections. Validation criteria cross-referenced with schemas.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Ideation/Validation Steps 8-10 implementation:
- Updated Zod schemas for Steps 8-10 (multi-round ideation, concept sheets with SWOT/feasibility/Billboard Hero, dual-format synthesis)
- Enriched AI prompts with domain-expert facilitation guidance (6-round ideation flow, proactive concept generation, dual-format synthesis with honest confidence)
- Enhanced validation criteria (6 for ideation, 5 for concept, 5 for validate)
- Step-specific UI components (IdeationClusterView, ConceptSheetView, SynthesisSummaryView)
- OutputPanel routes all 10 steps to appropriate rendering components
  </what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Open http://localhost:3000 in browser
3. Navigate to or create a workshop
4. Work through Steps 1-7 (or use existing workshop with completed steps)
5. **Test Step 8 (Ideation):**
   - AI should present 3-4 themed clusters with ideas and wild card markers
   - AI should ask for user ideas ("What ideas would YOU add?")
   - AI should facilitate brain writing (3 rounds of "Yes, and...")
   - AI should facilitate Crazy 8s with energetic pacing
   - AI should ask for idea selection (enforce max 3-4)
   - Extract output: verify cluster view renders with wild cards, sections, and selections
6. **Test Step 9 (Concept Development):**
   - AI should proactively draft complete concept sheet (not field-by-field)
   - Verify SWOT has 3 bullets per quadrant with evidence
   - Verify feasibility uses 1-5 numeric scores with rationale
   - AI should run Billboard Hero exercise
   - Extract output: verify concept sheet view with SWOT grid and feasibility bars
7. **Test Step 10 (Validate):**
   - AI should generate narrative intro + structured step summary
   - Verify confidence assessment is honest (not cheerleading)
   - Verify next steps are specific (not generic)
   - Extract output: verify synthesis summary view with narrative, steps, confidence gauge
8. Verify no regressions in Steps 1-7 output rendering
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 13, or describe specific issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. TypeScript compilation and build pass
2. Schema-prompt alignment verified for Steps 8-10 (zero mismatches post-fix)
3. Human verified end-to-end Steps 8-10 facilitation
4. Human verified step-specific UI rendering for Steps 8-10
5. No regressions in Steps 1-7
</verification>

<success_criteria>
- All schema fields for Steps 8-10 are mentioned in corresponding prompts
- TypeScript compilation and build succeed
- Human confirms: Step 8 AI follows 6-round ideation flow, Step 9 AI drafts complete concept sheet with SWOT/feasibility/Billboard Hero, Step 10 AI generates dual-format synthesis with honest assessment
- Human confirms: Step-specific UI components render correctly
- Human confirms: No regressions in prior steps
</success_criteria>

<output>
After completion, create `.planning/phases/13-ideation-validation-steps-8-10/13-03-SUMMARY.md`
</output>
