---
phase: 30-ux-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/canvas/post-it-node.tsx
  - src/app/globals.css
  - src/components/canvas/react-flow-canvas.tsx
autonomous: true
must_haves:
  truths:
    - "Post-it nodes show visible drag feedback (ghost trail or faint copy) while being dragged"
    - "Post-it hover state shows pointer cursor, never a grab hand"
    - "Canvas whiteboard has a faint grey background with visible dot grid pattern"
  artifacts:
    - path: "src/components/canvas/post-it-node.tsx"
      provides: "Post-it node visual styling with drag feedback"
      contains: "cursor-pointer"
    - path: "src/app/globals.css"
      provides: "Canvas cursor overrides for pointer tool"
      contains: "cursor-pointer-tool"
    - path: "src/components/canvas/react-flow-canvas.tsx"
      provides: "Canvas background configuration"
      contains: "BackgroundVariant.Dots"
  key_links:
    - from: "src/components/canvas/react-flow-canvas.tsx"
      to: "src/components/canvas/post-it-node.tsx"
      via: "draggingNodeId state passed as data.dragging prop"
      pattern: "dragging.*draggingNodeId"
---

<objective>
Fix canvas visual polish: post-it drag feedback, hover cursor, and dot grid background.

Purpose: Three visual/interaction bugs make the canvas feel unfinished -- post-its lack clear drag feedback, show wrong cursor on hover, and the canvas background needs a subtle grey tint with dot grid for depth.
Output: Polished post-it drag experience with visible ghost trail effect, pointer cursor on hover, and faint grey dot-grid canvas background.
</objective>

<execution_context>
@/Users/michaelchristie/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelchristie/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/canvas/post-it-node.tsx
@src/components/canvas/react-flow-canvas.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Post-it drag feedback and hover cursor</name>
  <files>src/components/canvas/post-it-node.tsx, src/app/globals.css</files>
  <action>
Fix UX-01 (drag feedback) and UX-02 (hover cursor):

**Post-it drag feedback (UX-01):**
The current drag feedback is too subtle (opacity 0.85, scale 1.03). Add a visible ghost trail effect:
1. In `post-it-node.tsx`, when `data.dragging` is true, add a CSS class that creates a visible drag ghost effect. Use a combination of:
   - A slightly more pronounced scale (1.05) and reduced opacity (0.7)
   - A `ring-2 ring-blue-300/50` to show the drag source
   - Add `rotate-[2deg]` for a "picked up" feel via Tailwind
2. Add a CSS rule in `globals.css` for `.react-flow__node.dragging` that creates a faint copy/shadow trail effect using `box-shadow` with an offset (e.g., `box-shadow: -4px 4px 8px rgba(0,0,0,0.15), -8px 8px 0 rgba(0,0,0,0.04)`). The second shadow simulates a ghost trail.

**Hover cursor (UX-02):**
The requirement is pointer cursor on hover, not grab hand. The current code in `post-it-node.tsx` line 99 already has `cursor-pointer` in the className. However, ReactFlow internally applies `cursor: grab` on `.react-flow__node`. The existing `globals.css` rule on line 148 sets `cursor: default` for `.cursor-pointer-tool .react-flow__node`.

Fix: Change the CSS rule for `.react-flow.cursor-pointer-tool .react-flow__node` from `cursor: default` to `cursor: pointer`. This ensures post-its show a pointer cursor when hovered in pointer-tool mode, matching the user's expectation. Keep the `cursor: grabbing` for dragging state as-is.
  </action>
  <verify>
1. Run `npx next build` (or `npm run build`) to ensure no TypeScript/build errors
2. Manual verification: hover over a post-it in pointer mode -- cursor should be pointer (not grab/default)
3. Manual verification: drag a post-it -- should see pronounced shadow trail effect and slight rotation
  </verify>
  <done>
Post-it nodes show pointer cursor on hover (not grab hand). Dragging a post-it shows visible ghost trail effect with shadow offset, slight rotation, and reduced opacity.
  </done>
</task>

<task type="auto">
  <name>Task 2: Canvas dot grid background with faint grey tint</name>
  <files>src/components/canvas/react-flow-canvas.tsx, src/app/globals.css</files>
  <action>
Fix UX-05 (canvas background):

The canvas already has `<Background variant={BackgroundVariant.Dots} gap={20} size={1} color="#d1d5db" />` which provides dot grid. However, the canvas background itself is pure white, which can feel flat.

1. In `react-flow-canvas.tsx`, update the `<Background>` component props:
   - Keep `variant={BackgroundVariant.Dots}` and `gap={20}`
   - Change `size={1}` to `size={1.5}` for slightly more visible dots
   - Keep `color="#d1d5db"` (gray-300, good contrast on light grey)

2. In `globals.css`, add a rule to give the ReactFlow canvas a faint grey background:
```css
.react-flow__renderer {
  background-color: #fafafa !important;
}
```
This `#fafafa` (equivalent to Tailwind zinc-50/neutral-50) provides just enough grey to create depth against white UI panels while keeping the dot grid visible.

Note: The `!important` is needed because ReactFlow sets an inline background-color on the renderer. Using `#fafafa` rather than a darker grey ensures the dots at `#d1d5db` remain clearly visible.
  </action>
  <verify>
1. Run `npm run build` to verify no build errors
2. Visual check: canvas should show a faint grey background (not pure white) with clearly visible grey dot grid pattern
  </verify>
  <done>
Canvas whiteboard displays a faint grey background (#fafafa) with visible dot grid pattern (1.5px grey dots at 20px intervals).
  </done>
</task>

</tasks>

<verification>
All three UX requirements addressed:
- UX-01: Post-it drag feedback visible (ghost trail shadow + rotation + opacity)
- UX-02: Post-it hover shows pointer cursor (CSS override changed from default to pointer)
- UX-05: Canvas has faint grey background with dot grid pattern
</verification>

<success_criteria>
1. Hovering over any post-it node in pointer mode shows a pointer cursor
2. Dragging a post-it shows visible feedback (shadow trail, slight rotation, reduced opacity)
3. Canvas background is faint grey (#fafafa) with visible dot grid pattern
4. No TypeScript or build errors introduced
</success_criteria>

<output>
After completion, create `.planning/phases/30-ux-polish/30-01-SUMMARY.md`
</output>
