---
phase: 34-seed-data
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/api/dev/seed-workshop/fixtures.ts
  - src/app/api/dev/seed-workshop/route.ts
autonomous: true
must_haves:
  truths:
    - "Seed fixtures include mind map nodes and edges for Step 8a"
    - "Seed fixtures include Crazy 8s slot titles for Step 8b"
    - "Seed fixtures include concept card data with SWOT and feasibility for Step 9"
    - "Route merges all canvas data types into _canvas key correctly"
  artifacts:
    - path: "src/app/api/dev/seed-workshop/fixtures.ts"
      provides: "Complete PawPal fixtures with canvas data for Steps 8 and 9"
      contains: "mindMapNodes"
    - path: "src/app/api/dev/seed-workshop/route.ts"
      provides: "Seed route handling expanded canvas types"
      contains: "_canvas"
  key_links:
    - from: "src/app/api/dev/seed-workshop/fixtures.ts"
      to: "src/stores/canvas-store.ts"
      via: "MindMapNodeState, MindMapEdgeState, Crazy8sSlot, ConceptCardData types"
      pattern: "mindMapNodes|mindMapEdges|crazy8sSlots|conceptCards"
    - from: "src/app/api/dev/seed-workshop/route.ts"
      to: "src/app/api/dev/seed-workshop/fixtures.ts"
      via: "PAWPAL_FIXTURES import and canvas merge"
      pattern: "fixture\\.canvasData"
---

<objective>
Expand seed workshop fixtures with complete canvas state for Steps 8 (mind map + Crazy 8s) and Step 9 (concept cards), and update the route's canvas merge logic to handle all canvas data types.

Purpose: The existing fixtures have comprehensive artifact/summary data for all 10 steps and canvas PostIts for Steps 2/4/6, but Steps 8 and 9 are missing their visual canvas representations (mind map tree, Crazy 8s slot titles, concept cards with positions).

Output: Updated fixtures.ts with mind map nodes/edges, Crazy 8s slots, and concept cards; updated route.ts with expanded canvas merge logic.
</objective>

<execution_context>
@/Users/michaelchristie/.claude/get-shit-done/workflows/execute-plan.md
@/Users/michaelchristie/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/api/dev/seed-workshop/fixtures.ts
@src/app/api/dev/seed-workshop/route.ts
@src/stores/canvas-store.ts
@src/lib/canvas/mind-map-theme-colors.ts
@src/lib/canvas/crazy-8s-types.ts
@src/lib/canvas/concept-card-types.ts
@src/lib/canvas/concept-card-layout.ts
@src/lib/canvas/mind-map-layout.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand fixture type and add Step 8/9 canvas data</name>
  <files>src/app/api/dev/seed-workshop/fixtures.ts</files>
  <action>
1. Expand the `StepFixture` type to support all canvas data types:
   ```typescript
   export type StepFixture = {
     artifact: Record<string, unknown>;
     summary: string;
     canvas?: PostIt[];
     canvasData?: {
       postIts?: PostIt[];
       mindMapNodes?: MindMapNodeState[];
       mindMapEdges?: MindMapEdgeState[];
       crazy8sSlots?: Crazy8sSlot[];
       conceptCards?: ConceptCardData[];
     };
   };
   ```
   Import `MindMapNodeState`, `MindMapEdgeState` from `@/stores/canvas-store`, `Crazy8sSlot` from `@/lib/canvas/crazy-8s-types`, and `ConceptCardData` from `@/lib/canvas/concept-card-types`.

2. Add mind map nodes and edges to the `ideation` fixture's `canvasData`:
   - Root node: label = the reframed HMW (shortened), isRoot=true, level=0, themeColorId='root', themeColor='#6b7280', themeBgColor='#f3f4f6'
   - 3 theme branches (level=1): "Smart Routine Engine" (blue: #3b82f6/#dbeafe), "Unified Pet Dashboard" (green: #10b981/#d1fae5), "Care Delegation" (purple: #8b5cf6/#ede9fe)
   - Each theme gets 2-3 child idea nodes (level=2) inheriting parent's color
   - Edges connect root->themes and themes->ideas
   - Use crypto.randomUUID() for all node/edge IDs
   - Positions don't matter much (dagre auto-layouts), but set reasonable defaults (x:0,y:0 for root, stagger themes at y:-200/0/200, ideas offset further right)

3. Add Crazy 8s slots to the `ideation` fixture's `canvasData`:
   - 8 slots matching the existing `crazyEightsIdeas` in the artifact
   - Each slot: `{ slotId: 'slot-N', title: idea.title }` (no imageUrl or drawingId since there are no actual drawings in seed data)

4. Add concept cards to the `concept` fixture's `canvasData`:
   - 2 concept cards matching the 2 concepts in the artifact
   - Card 1 ("PawPal Autopilot"): position {x:100, y:100}, full SWOT/feasibility/billboardHero from artifact
   - Card 2 ("PawPal At-a-Glance"): position {x:130, y:130} (dealing-card offset), full data from artifact
   - Each card needs: id (crypto.randomUUID()), conceptName, ideaSource, elevatorPitch, usp, swot (3 items per quadrant), feasibility (scores + rationales), billboardHero
   - Use the existing concept data from the artifact to populate cards (keep them consistent)

5. Migrate Steps 2, 4, and 6 from the old `canvas: PostIt[]` field to the new `canvasData: { postIts: [...] }` format for consistency (keep `canvas` field for backward compat but prefer `canvasData`).
  </action>
  <verify>Run `npx tsx -e "import { PAWPAL_FIXTURES } from './src/app/api/dev/seed-workshop/fixtures'; const f = PAWPAL_FIXTURES; console.log('ideation canvasData:', !!f.ideation.canvasData?.mindMapNodes?.length, !!f.ideation.canvasData?.crazy8sSlots?.length); console.log('concept canvasData:', !!f.concept.canvasData?.conceptCards?.length);"` to confirm new canvas data exists. Also verify TypeScript compiles: `npx tsc --noEmit src/app/api/dev/seed-workshop/fixtures.ts`</verify>
  <done>The ideation fixture has canvasData with 7+ mindMapNodes, 6+ mindMapEdges, and 8 crazy8sSlots. The concept fixture has canvasData with 2 conceptCards. All existing PostIt canvas data (Steps 2/4/6) remains intact.</done>
</task>

<task type="auto">
  <name>Task 2: Update route canvas merge logic for all canvas data types</name>
  <files>src/app/api/dev/seed-workshop/route.ts</files>
  <action>
Update the artifact data merge section (around line 163) to handle the new `canvasData` field in addition to the legacy `canvas` field:

```typescript
// Merge _canvas into artifact JSONB if canvas data exists
let artifactData = fixture.artifact;

if (fixture.canvasData) {
  // New format: full canvas state with all types
  artifactData = { ...fixture.artifact, _canvas: fixture.canvasData };
} else if (fixture.canvas) {
  // Legacy format: PostIt[] only
  artifactData = { ...fixture.artifact, _canvas: { postIts: fixture.canvas } };
}
```

This ensures:
- Steps with `canvasData` (8, 9, and eventually 2/4/6) get the full canvas state including mindMapNodes, mindMapEdges, crazy8sSlots, conceptCards
- Steps with legacy `canvas` (backward compat) still work
- Steps without canvas data (1, 3, 5, 7, 10) get artifact only

No other changes needed to the route â€” the existing Zod validation, workshop creation, and session creation logic remain the same.
  </action>
  <verify>Run `npm run build` to verify the route compiles without errors. Then start dev server and hit `curl http://localhost:3000/api/dev/seed-workshop` to verify it returns success (requires auth, so verify build succeeds as proxy).</verify>
  <done>The route correctly merges canvasData (with mindMapNodes, mindMapEdges, crazy8sSlots, conceptCards) into the _canvas key of the artifact JSONB. Build passes with no TypeScript errors.</done>
</task>

</tasks>

<verification>
- TypeScript compilation passes: `npx tsc --noEmit`
- Build succeeds: `npm run build`
- Fixture validation: all fixtures still pass Zod schema validation (the route's built-in validation will confirm this when called)
- Canvas data types are correct: mindMapNodes match MindMapNodeState, edges match MindMapEdgeState, crazy8sSlots match Crazy8sSlot, conceptCards match ConceptCardData
</verification>

<success_criteria>
1. Seed fixtures include mind map canvas data (nodes + edges) for Step 8
2. Seed fixtures include Crazy 8s slot data (8 titled slots) for Step 8
3. Seed fixtures include concept card data (2 cards with full SWOT/feasibility) for Step 9
4. Route merges all canvas data types into _canvas key correctly
5. TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/34-seed-data/34-01-SUMMARY.md`
</output>
