# Roadmap: WorkshopPilot.ai

## Milestones

- âœ… **v0.5 Application Shell** â€” Phases 1-6 (shipped 2026-02-08)
- âœ… **v1.0 Working AI Facilitation** â€” Phases 7-14 (shipped 2026-02-10)
- âœ… **v1.1 Canvas Foundation** â€” Phases 15-20 (shipped 2026-02-11)
- âœ… **v1.2 Canvas Whiteboard** â€” Phases 21-24 (shipped 2026-02-12)
- âœ… **v1.3 EzyDraw & Visual Ideation** â€” Phases 25-29 (shipped 2026-02-12)
- âœ… **v1.4 Personal Workshop Polish** â€” Phases 30-35 (shipped 2026-02-13)
- âœ… **v1.5 Launch Ready** â€” Phases 36-39 (shipped 2026-02-19)
- âœ… **v1.6 Production Polish** â€” Phases 40-42 (shipped 2026-02-25)
- âœ… **v1.7 Build Pack** â€” Phases 43-46 (shipped 2026-02-25)
- ðŸš§ **v1.8 Onboarding + Payments** â€” Phases 47-53 (in progress)

## Phases

<details>
<summary>âœ… v0.5 Application Shell (Phases 1-6) â€” SHIPPED 2026-02-08</summary>

- [x] Phase 1: Foundation & Environment (3/3 plans)
- [x] Phase 2: Authentication & Authorization (3/3 plans)
- [x] Phase 3: Application Shell (3/3 plans)
- [x] Phase 4: Workshop Data Layer (3/3 plans)
- [x] Phase 5: Basic AI Integration (4/4 plans)
- [x] Phase 6: Production Deployment (3/3 plans)

See `milestones/v0.5-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.0 Working AI Facilitation (Phases 7-14) â€” SHIPPED 2026-02-10</summary>

- [x] Phase 7: Context Architecture (3/3 plans)
- [x] Phase 8: AI Facilitation Engine (3/3 plans)
- [x] Phase 9: Structured Outputs (3/3 plans)
- [x] Phase 10: Navigation & Persistence (2/2 plans)
- [x] Phase 11: Discovery Steps 1-4 (3/3 plans)
- [x] Phase 12: Definition Steps 5-7 (3/3 plans)
- [x] Phase 13: Ideation & Validation Steps 8-10 (3/3 plans)
- [x] Phase 13.1: Reset Step & Step 8 Sub-Steps (3/3 plans)
- [x] Phase 14: Production Hardening (2/2 plans)

See `milestones/v1.0-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.1 Canvas Foundation (Phases 15-20) â€” SHIPPED 2026-02-11</summary>

- [x] Phase 15: Canvas Infrastructure & SSR Safety (3/3 plans)
- [x] Phase 16: Split-Screen Layout & Step Container Integration (3/3 plans)
- [x] Phase 17: Canvas Core Interactions (3/3 plans)
- [x] Phase 18: Step-Specific Canvases - Steps 2 & 4 (2/2 plans)
- [x] Phase 19: AI-Canvas Integration (2/2 plans)
- [x] Phase 20: Bundle Optimization & Mobile Refinement (2/2 plans)

See `milestones/v1.1-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.2 Canvas Whiteboard (Phases 21-24) â€” SHIPPED 2026-02-12</summary>

- [x] Phase 21: Grid Foundation & Coordinate System (2/2 plans)
- [x] Phase 22: Dynamic Grid Structure - Column Management (2/2 plans)
- [x] Phase 23: AI Suggest-Then-Confirm Placement (2/2 plans)
- [x] Phase 24: Output-to-Canvas Retrofit - Steps 2 & 4 (3/3 plans)

See `milestones/v1.2-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.3 EzyDraw & Visual Ideation (Phases 25-29) â€” SHIPPED 2026-02-12</summary>

- [x] Phase 25: EzyDraw Foundation (6/6 plans)
- [x] Phase 26: Drawing-Canvas Integration (4/4 plans)
- [x] Phase 27: UI Kit & Advanced Tools (3/3 plans)
- [x] Phase 28: Mind Map & Crazy 8s Canvases (6/6 plans)
- [x] Phase 29: Visual Concept Cards (4/4 plans)

See `milestones/v1.3-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.4 Personal Workshop Polish (Phases 30-35) â€” SHIPPED 2026-02-13</summary>

- [x] Phase 30: UX Polish (3/3 plans)
- [x] Phase 31: Output Panel Retirement (1/1 plan)
- [x] Phase 32: Workshop Management (2/2 plans)
- [x] Phase 33: AI Personality (2/2 plans)
- [x] Phase 34: Seed Data (2/2 plans)
- [x] Phase 35: E2E Testing (3/3 plans)

See `milestones/v1.4-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.5 Launch Ready (Phases 36-39) â€” SHIPPED 2026-02-19</summary>

- [x] Phase 36: Olive Theme Rollout (4/4 plans)
- [x] Phase 37: Landing Page (2/2 plans)
- [x] Phase 38: Pricing Page (1/1 plan)
- [x] Phase 39: Step 10 Outputs Shell (2/2 plans)

See `milestones/v1.5-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.6 Production Polish (Phases 40-42) â€” SHIPPED 2026-02-25</summary>

- [x] Phase 40: Production Auth (2/2 plans)
- [ ] Phase 41: User Onboarding (0/1 plans â€” deferred)
- [x] Phase 42: Visual Polish (3/3 plans)

See `milestones/v1.6-ROADMAP.md` for full details.

</details>

<details>
<summary>âœ… v1.7 Build Pack (Phases 43-46) â€” SHIPPED 2026-02-25</summary>

- [x] Phase 43: Workshop Completion (2/2 plans)
- [x] Phase 44: AI Deliverable Generation (2/2 plans)
- [x] Phase 45: Outputs Page (2/2 plans)
- [x] Phase 46: Dashboard Routing (1/1 plan)

See `milestones/v1.7-ROADMAP.md` for full details.

</details>

### ðŸš§ v1.8 Onboarding + Payments (In Progress)

**Milestone Goal:** Add first-run onboarding experience and credit-based payment system with Stripe Checkout, converting the free taste-test (Steps 1-6) into revenue at Step 7.

- [x] **Phase 47: Database Foundation** â€” Billing and onboarding schema migrations (completed 2026-02-25)
- [x] **Phase 48: Stripe Infrastructure** â€” SDK, environment config, Products and Prices setup (completed 2026-02-25)
- [x] **Phase 49: Payment API Layer** â€” Checkout session route, webhook handler, success/cancel pages (completed 2026-02-25)
- [x] **Phase 50: Credit Actions and Server-Side Enforcement** â€” Atomic credit deduction and paywall logic (completed 2026-02-25)
- [ ] **Phase 51: Paywall UI** â€” Upgrade modal, locked step indicators, dashboard credit badge
- [ ] **Phase 52: Onboarding UI** â€” Welcome modal and onboarding state wiring
- [ ] **Phase 53: Pricing Page and Integration** â€” Updated tiers, Stripe CTA links, end-to-end validation

## Phase Details

### Phase 47: Database Foundation
**Goal**: Stable schema for all billing and onboarding data exists, migrations have run, and no subsequent phase needs a schema change
**Depends on**: Phase 46 (v1.7 complete)
**Requirements**: BILL-04, BILL-05, CRED-03, ONBD-03
**Success Criteria** (what must be TRUE):
  1. `users` table has `creditBalance` (int, default 0) and `onboardingComplete` (bool, default false) columns
  2. `workshops` table has `creditConsumedAt` (timestamp, nullable) column
  3. `credit_transactions` ledger table exists with `stripeSessionId UNIQUE` constraint, `type` enum (purchase | consumption), and `clerkUserId` foreign key
  4. `users` table has `stripeCustomerId` (varchar, nullable) column for future portal access
  5. Drizzle migration runs cleanly on production Neon database with zero downtime
**Plans**: 2

Plans:
- [ ] 47-01: Schema changes (users, workshops, credit_transactions) and Drizzle migration (Wave 1)
- [ ] 47-02: Idempotent billing seed script and npm command (Wave 2)

### Phase 48: Stripe Infrastructure
**Goal**: Stripe SDK is installed, all environment variables are configured, Products and Prices exist in Stripe Dashboard, and the Stripe CLI is wired for local webhook testing
**Depends on**: Phase 47
**Requirements**: BILL-01, BILL-02
**Success Criteria** (what must be TRUE):
  1. `stripe@^20.4.0` is installed as a server-only dependency with no client-side Stripe packages present
  2. `src/lib/billing/stripe.ts` singleton initializes without error and the startup assertion throws on test keys in production
  3. Two Stripe Products exist (Single Flight $79 / 1 credit, Serial Entrepreneur $149 / 3 credits) with Price IDs recorded in environment variables
  4. `STRIPE_SECRET_KEY`, `STRIPE_WEBHOOK_SECRET`, `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`, `STRIPE_PRICE_SINGLE_FLIGHT`, and `STRIPE_PRICE_SERIAL_ENTREPRENEUR` are set in `.env.local` and Vercel dashboard
  5. Stripe CLI is running locally and `stripe listen --forward-to localhost:3000/api/webhooks/stripe` routes test events correctly
**Plans**: 1/1 complete

Plans:
- [x] 48-01: Install stripe SDK, create stripe.ts singleton, configure all env vars, create Products/Prices in Stripe Dashboard

### Phase 49: Payment API Layer
**Goal**: Users can complete a purchase through Stripe Checkout and credits are reliably delivered to their account via both the success page and the webhook
**Depends on**: Phase 48
**Requirements**: BILL-01, BILL-02, BILL-03, BILL-04, BILL-05
**Success Criteria** (what must be TRUE):
  1. Clicking "Buy Now" for Single Flight or Serial Entrepreneur redirects the user to a Stripe-hosted checkout page
  2. After completing checkout, the success page immediately shows the correct credit count without waiting for the webhook
  3. If the webhook fires before the user returns (or when Stripe retries), credits are not doubled â€” the `credit_transactions.stripeSessionId UNIQUE` constraint makes fulfillment idempotent
  4. A row is written to `credit_transactions` for every purchase, recording the session ID, credit quantity, amount, and timestamp
  5. `/api/webhooks/stripe` returns 200 for valid events and 400 for invalid signatures â€” not 500 regardless of input
**Plans**: 3

Plans:
- [ ] 49-01: Price config + Checkout route handler (`/api/billing/checkout`) with server-side priceIdâ†’creditQty lookup, lazy Stripe Customer creation, and 303 redirect (Wave 1)
- [ ] 49-02: Shared `fulfillCreditPurchase()` function + Webhook handler (`/api/webhooks/stripe`) with raw body signature verification and idempotent fulfillment (Wave 1)
- [ ] 49-03: Billing success and cancel pages with dual-trigger credit sync on success (Wave 2, depends on 49-02)

### Phase 50: Credit Actions and Server-Side Enforcement
**Goal**: Steps 1-6 are unconditionally free, advancement past Step 6 atomically consumes one credit server-side, and the server rejects step access for workshops without a credit regardless of what the client sends
**Depends on**: Phase 49
**Requirements**: PAYW-01, PAYW-05, PAYW-06, CRED-02, CRED-03
**Success Criteria** (what must be TRUE):
  1. Steps 1-6 load for any authenticated user with zero credits â€” no paywall check fires
  2. Calling `advanceToNextStep()` at Step 6 with zero credits returns `{ paywallRequired: true }` and no credit is deducted
  3. Calling `advanceToNextStep()` at Step 6 with one credit deducts exactly one credit and sets `workshop.creditConsumedAt` â€” two concurrent calls with one credit result in one success and one `{ paywallRequired: true }`
  4. Direct URL navigation to `/workshop/[id]/step/7` for a workshop without `creditConsumedAt` set shows a paywall state â€” the server component refuses to render step content
  5. Workshops created before the paywall launch (before `creditConsumedAt` column existed) are treated as grandfathered: `creditConsumedAt IS NULL AND workshop.completedAt > [cutoff]` skips the credit check
**Plans**: 2

Plans:
- [ ] 50-01: `billing-actions.ts` with atomic `consumeCredit()`, `getCredits()`, and `markOnboardingComplete()` server actions (Wave 1)
- [ ] 50-02: Modify `advanceToNextStep()` with Step 6â†’7 credit gate and grandfathering logic; add server-side credit check to Step 7-10 Server Component; create PaywallOverlay component (Wave 2, depends on 50-01)

### Phase 51: Paywall UI
**Goal**: Users understand the credit model before reaching Step 7, see a compelling upgrade prompt when they hit the paywall, can purchase and return directly to their workshop, and always know their current credit balance
**Depends on**: Phase 50
**Requirements**: PAYW-02, PAYW-03, PAYW-04, CRED-01
**Success Criteria** (what must be TRUE):
  1. Steps 7-10 show a lock badge in the stepper when `creditBalance === 0` and `creditConsumedAt` is not set for the current workshop â€” users see the gate coming before they reach it
  2. Attempting to proceed past Step 6 with no credits shows an inline upgrade modal with outcome-framed headline ("Your Build Pack is 4 steps away"), progress context ("6 of 10 steps complete"), and a "Save and decide later" dismiss option
  3. Clicking the primary CTA in the upgrade modal redirects to Stripe Checkout for Single Flight ($79)
  4. After a successful purchase, the user lands back in their workshop at Step 7 with the credit consumed and step content visible
  5. The dashboard header shows a credit badge ("X credits remaining" or "No credits â€” get one") that reflects the live balance after purchase
**Plans**: 2

Plans:
- [ ] 51-01: Upgrade dialog (outcome-framed dialog at Step 6 paywall + lock badges in stepper) (Wave 1)
- [ ] 51-02: Return-to-workshop flow (checkout return URL + success page redirect) + dashboard credit badge (Wave 2, depends on 51-01)

### Phase 52: Onboarding UI
**Goal**: First-time users see a welcome modal that orients them to the app, the modal never reappears after dismissal, and dismissal state persists across devices and browsers
**Depends on**: Phase 47
**Requirements**: ONBD-01, ONBD-02, ONBD-03
**Success Criteria** (what must be TRUE):
  1. A new authenticated user visiting the dashboard for the first time sees a welcome modal explaining the app, the chat/canvas/steps layout, and the taste-test model (Steps 1-6 free)
  2. Dismissing the modal (via the CTA or close button) calls `markOnboardingComplete()` and the modal never appears again in the same session
  3. Signing in from a different browser or device after dismissal does not show the modal again â€” `users.onboardingComplete = true` in Neon is the source of truth, not localStorage
  4. The welcome modal is rendered client-side only (never SSR) using a server-passed `showWelcomeModal` prop from the dashboard Server Component, preventing hydration mismatches
**Plans**: TBD

Plans:
- [ ] 52-01: `welcome-modal.tsx` (shadcn Dialog) and dashboard wiring with server-side `onboardingComplete` check

### Phase 53: Pricing Page and Integration
**Goal**: The pricing page reflects the current credit-based tiers, both self-serve tiers link directly to Stripe Checkout, and the end-to-end purchase flow works correctly from pricing page through to workshop unlock
**Depends on**: Phase 51
**Requirements**: PRIC-01, PRIC-02, PRIC-03
**Success Criteria** (what must be TRUE):
  1. The pricing page displays three tiers: Single Flight ($79, 1 credit), Serial Entrepreneur ($149, 3 credits), and Agency (Contact Sales) â€” the old v1.5 tiers are gone
  2. The Agency tier shows a "Contact Sales" button that opens a mailto or contact form â€” no self-serve billing flow is triggered
  3. Clicking "Buy Now" on Single Flight or Serial Entrepreneur from the pricing page initiates a Stripe Checkout session and redirects to Stripe's hosted page
  4. The full purchase path works end-to-end: pricing page â†’ Stripe Checkout â†’ success page with credits applied â†’ return to dashboard showing updated balance â†’ Step 7 accessible in an existing workshop
**Plans**: TBD

Plans:
- [ ] 53-01: Update `/pricing/page.tsx` with new tiers, CTA links to `/api/billing/checkout`, and Agency contact button
- [ ] 53-02: End-to-end integration validation (Steps 1-6 free â†’ paywall â†’ Stripe test purchase â†’ Step 7 unlocked)

## Progress

| Phase | Milestone | Plans Complete | Status | Completed |
|-------|-----------|----------------|--------|-----------|
| 1-6 | v0.5 | 19/19 | Complete | 2026-02-08 |
| 7-14 | v1.0 | 25/25 | Complete | 2026-02-10 |
| 15-20 | v1.1 | 15/15 | Complete | 2026-02-11 |
| 21-24 | v1.2 | 9/9 | Complete | 2026-02-12 |
| 25-29 | v1.3 | 23/23 | Complete | 2026-02-12 |
| 30-35 | v1.4 | 13/13 | Complete | 2026-02-13 |
| 36-39 | v1.5 | 9/9 | Complete | 2026-02-19 |
| 40-42 | v1.6 | 5/5 | Complete | 2026-02-25 |
| 43-46 | v1.7 | 7/7 | Complete | 2026-02-25 |
| 47. Database Foundation | 2/2 | Complete    | 2026-02-25 | - |
| 48. Stripe Infrastructure | 1/1 | Complete    | 2026-02-25 | - |
| 49. Payment API Layer | 3/3 | Complete    | 2026-02-25 | - |
| 50. Credit Actions and Server-Side Enforcement | 2/2 | Complete    | 2026-02-25 | - |
| 51. Paywall UI | v1.8 | 0/2 | Not started | - |
| 52. Onboarding UI | v1.8 | 0/TBD | Not started | - |
| 53. Pricing Page and Integration | v1.8 | 0/TBD | Not started | - |

**Total project:** 125 plans across 46 phases shipped (9 milestones) + v1.8 in progress (7 phases, plans TBD)

---
*Last updated: 2026-02-26 â€” v1.8 roadmap created*
