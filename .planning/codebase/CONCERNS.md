# Codebase Concerns

**Analysis Date:** 2026-02-07

## Tech Debt

**Boilerplate Metadata:**
- Issue: Default metadata not customized for the application
- Files: `src/app/layout.tsx`
- Impact: Branding is incorrect - site title shows "Create Next App" and description is generic "Generated by create next app"
- Fix approach: Update `metadata` object with actual project title ("Workshop Pilot"), description, and proper favicon/icons configuration

**Unused CSS Variables:**
- Issue: Many CSS custom variables defined in `src/app/globals.css` are not used in the codebase
- Files: `src/app/globals.css` (lines 6-44, 115-122)
- Impact: Increases stylesheet size and creates maintenance burden; sidebar, chart, and component UI colors exist but no components use them
- Fix approach: Either implement the UI components that use these variables (sidebar, charts, cards) or remove the unused variable definitions

**Inconsistent Styling Approach:**
- Issue: Logo component uses hardcoded inline style for color (`style={{ color: '#8B9A7A' }}`) instead of Tailwind classes
- Files: `src/app/components/Logo.tsx` (line 30)
- Impact: Creates disconnect between CSS custom variables system and component styling; hard to maintain color consistency
- Fix approach: Replace inline style with Tailwind color class or define custom color in Tailwind config

**Missing Responsive Sizing Edge Case:**
- Issue: Logo SVG has hardcoded responsive classes (`md:h-10 md:w-10`) that don't align with the `size` prop's responsive design pattern
- Files: `src/components/Logo.tsx` (lines 16-20, 29)
- Impact: Size prop becomes unreliable at smaller breakpoints; maintenance confusion when updating responsive design
- Fix approach: Extend `svgSizeClasses` object to include all breakpoints or refactor size prop to handle all breakpoints

**Unused Font Import:**
- Issue: Geist_Mono font is imported and configured but never used
- Files: `src/app/layout.tsx` (lines 10-12)
- Impact: Unnecessary font download and CSS variable registration
- Fix approach: Remove Geist_Mono import and variable configuration, or use it in code

## Known Bugs

**SVG Positioning Misalignment:**
- Symptoms: Paper plane icon in Logo appears to float inconsistently relative to text
- Files: `src/components/Logo.tsx` (lines 27-36)
- Trigger: View the logo on different screen sizes or different browsers
- Workaround: The positioning uses `absolute`, `-top-2`, `left-[-2px]`, and CSS color property which is fragile

**Metadata Not Reflecting Brand:**
- Symptoms: Browser tab shows "Create Next App" instead of "Workshop Pilot"
- Files: `src/app/layout.tsx` (lines 15-18)
- Trigger: Load the application in any browser
- Workaround: None - this must be fixed in the metadata configuration

## Security Considerations

**No Environment Variable Validation:**
- Risk: Application has no mechanism to validate required environment variables at startup
- Files: `next.config.ts` (completely empty)
- Current mitigation: None detected
- Recommendations: Implement environment variable validation in `next.config.ts` or as middleware. Critical for future integrations (Gemini API, Vercel Postgres, authentication)

**Missing Content Security Policy:**
- Risk: No CSP headers configured; vulnerable to XSS attacks and unsafe inline script execution
- Files: `next.config.ts`
- Current mitigation: None
- Recommendations: Add security headers configuration in `next.config.ts` including CSP, X-Frame-Options, X-Content-Type-Options

**No Input Validation Framework:**
- Risk: When forms and user inputs are added, there's no validation library in place
- Files: Project-wide
- Current mitigation: None - validation framework not yet added
- Recommendations: Add Zod or similar validation library before implementing state management (see Issue #004 in create-github-issues.sh)

**Inline SVG without Sanitization:**
- Risk: SVG embedded directly in Logo component without DomPurify or similar sanitization
- Files: `src/components/Logo.tsx` (lines 28-36)
- Current mitigation: SVG is hardcoded, not user-supplied
- Recommendations: Keep SVG hardcoded. If dynamic SVG support is ever added, implement sanitization

## Performance Bottlenecks

**Potential Hydration Issues with Large Metadata:**
- Problem: Geist font variables defined but configuration is verbose; could impact initial page load if expanded
- Files: `src/app/layout.tsx`
- Cause: Font subsetting configuration only includes 'latin', but no optimization for above-the-fold content
- Improvement path: Configure `font-display: swap` and subset fonts more aggressively for faster paint timing

**CSS Variable Overhead:**
- Problem: 40+ CSS custom variables defined upfront but only 2-3 are used; increases CSSOM size
- Files: `src/app/globals.css` (lines 46-113)
- Cause: Configuration from UI library template (likely Shadcn) but components not yet implemented
- Improvement path: Remove unused variables before adding new components, or lazy-load them

**Unused Dependencies:**
- Problem: `tw-animate-css` (1.4.0) is installed but not imported or used anywhere
- Files: Package manifest
- Cause: May have been added during initial setup but not utilized
- Improvement path: Remove from `package.json` and `package-lock.json` if animations are implemented with Tailwind's built-in animation utilities

## Fragile Areas

**Logo Component Sizing Logic:**
- Files: `src/components/Logo.tsx`
- Why fragile: Uses TypeScript conditional mapping with strings that can easily mismatch; no validation that size prop is one of the allowed values
- Safe modification: Add type safety using `as const` on the size type literal, and consider using `satisfies` keyword for runtime verification
- Test coverage: No tests exist for the Logo component

**Hardcoded Colors:**
- Files: `src/components/Logo.tsx` (line 30: hardcoded sage green)
- Why fragile: Color value duplicated in code instead of centralized in theme
- Safe modification: Any color changes require manual code edit; should reference CSS custom variables
- Test coverage: No visual regression tests

**Responsive Design Inconsistency:**
- Files: `src/components/Logo.tsx` and `src/app/page.tsx`
- Why fragile: Logo uses `size` prop with predefined classes, but page layout also uses inline responsive classes (`sm:text-3xl md:text-8xl`)
- Safe modification: Ensure all responsive breakpoints use consistent pattern (either all via props or all via inline classes)
- Test coverage: No responsive testing framework in place

## Scaling Limits

**No Database Infrastructure:**
- Current capacity: Application is static - no data persistence
- Limit: Cannot implement Issues #004 (State Management) and #005 (Admin Dashboard) without database
- Scaling path: Implement Vercel Postgres connection and setup database schema before Issues #004 and #005

**No Authentication System:**
- Current capacity: No user authentication
- Limit: Cannot implement Issues #001 (Auth Setup), #005 (Admin Dashboard), or any multi-user features
- Scaling path: Implement authentication provider (NextAuth.js or Vercel's built-in auth) as Issue #001

**No API Routes:**
- Current capacity: Application is frontend-only
- Limit: Cannot implement Issues #003 (AI Chat) or #004 (State Management) which require server-side endpoints
- Scaling path: Add `src/app/api/` route handlers for chat and state management

**Gemini API Not Configured:**
- Current capacity: No AI integration
- Limit: Cannot implement Issue #003 (AI Chat Integration)
- Scaling path: Add Gemini API key to environment variables, create API route at `src/app/api/chat/` with streaming support

## Dependencies at Risk

**Next.js 16.1.1 (Recently Upgraded):**
- Risk: Recent upgrade from earlier version (commit 45d5e98); potential breaking changes not fully tested
- Impact: CVE fix applied (commit a63b3c6 "Fix React Server Components CVE vulnerabilities") suggests security vulnerabilities existed in previous version
- Migration plan: Keep current version. Future versions should be tested in feature branch before merging to main.

**React 19.2.0:**
- Risk: React 19 has significant changes from React 18; components may not be compatible with third-party libraries
- Impact: Server Components changes may affect future library integrations
- Migration plan: Monitor library compatibility as new dependencies are added (especially UI libraries)

**Tailwind CSS 4:**
- Risk: Major version upgrade (from v3); breaking changes in configuration syntax
- Impact: `postcss.config.mjs` uses new plugin format, `tsconfig.json` includes `.next/dev/types/**/*.ts` which may cause type conflicts
- Migration plan: Ensure all future CSS uses Tailwind 4 syntax; don't mix v3 and v4 utilities

**TypeScript 5:**
- Risk: Wide version range (`^5`) allows major version jumps
- Impact: May introduce breaking changes in type checking
- Migration plan: Consider pinning to minor version (e.g., `^5.3.0`) once stable version identified

## Missing Critical Features

**No Error Handling:**
- Problem: Application lacks error boundaries and error handling strategy
- Blocks: Future API calls (Issues #003, #004) will be unreliable without error handling
- Priority: High - must implement before any backend features

**No Logging/Analytics:**
- Problem: No mechanism to track errors or user interactions
- Blocks: Issue #005 (Admin Dashboard) cannot monitor participant progress without logging
- Priority: High - required for Issue #005

**No Type Safety for UI Props:**
- Problem: Components lack proper TypeScript validation (e.g., Logo size prop accepts any string)
- Blocks: Safe refactoring and component composition as codebase grows
- Priority: Medium - impacts maintainability

## Test Coverage Gaps

**No Tests for Logo Component:**
- What's not tested: Size mapping, responsive behavior, SVG rendering, className concatenation
- Files: `src/components/Logo.tsx`
- Risk: Changes to Logo could break page visually without detection
- Priority: Medium - Logo is high-visibility component

**No Tests for CSS Classes:**
- What's not tested: Tailwind class combinations in page layout
- Files: `src/app/page.tsx`
- Risk: Responsive breakpoint changes could break on mobile/tablet
- Priority: Medium - affects user experience on different devices

**No E2E Tests:**
- What's not tested: Actual page load, visual rendering, browser compatibility
- Files: Entire application
- Risk: Regressions in visual layout go undetected
- Priority: High - needed before deploying to production

**No Test Framework Configured:**
- What's not tested: Everything
- Files: `package.json` has no test runner (Jest, Vitest, etc.)
- Risk: No automated test capability exists
- Priority: High - must be added before Issue #004 (database) and #005 (admin dashboard)

**No ESLint Rules for Testing:**
- What's not tested: Code quality standards not enforced
- Files: `eslint.config.mjs` has only Next.js defaults
- Risk: Code style inconsistencies will accumulate
- Priority: Low - secondary to adding actual tests

---

*Concerns audit: 2026-02-07*
